"use strict";(self.webpackChunkworkshop_client=self.webpackChunkworkshop_client||[]).push([[425],{425:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var s,o=a(43),n=a(472),r=a(981),i=new Uint8Array(16);function c(){if(!s&&!(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(i)}const l=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const d=function(e){return"string"===typeof e&&l.test(e)};for(var m=[],u=0;u<256;++u)m.push((u+256).toString(16).substr(1));const b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(m[e[t+0]]+m[e[t+1]]+m[e[t+2]]+m[e[t+3]]+"-"+m[e[t+4]]+m[e[t+5]]+"-"+m[e[t+6]]+m[e[t+7]]+"-"+m[e[t+8]]+m[e[t+9]]+"-"+m[e[t+10]]+m[e[t+11]]+m[e[t+12]]+m[e[t+13]]+m[e[t+14]]+m[e[t+15]]).toLowerCase();if(!d(a))throw TypeError("Stringified UUID is invalid");return a};const f=function(e,t,a){var s=(e=e||{}).random||(e.rng||c)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){a=a||0;for(var o=0;o<16;++o)t[a+o]=s[o];return t}return b(s)};var p=a(216),h=a(638),w=a(235),x=a(579);const g=()=>{const e=(0,p.Zp)(),[t,a]=(0,o.useState)(""),[s,i]=(0,o.useState)(""),[c,l]=(0,o.useState)(""),[d,m]=(0,o.useState)(""),[u,b]=(0,o.useState)(!1),[g,v]=(0,o.useState)(null),[k,y]=(0,o.useState)(null),[N,j]=(0,o.useState)(!1),[C,S]=(0,o.useState)(""),F=t&&s&&c,R=async()=>{if(F){j(!0);try{if(k){const e=(0,n.H9)(r.db,"workshops",k);await(0,n.mZ)(e,{collegeName:t,workshopName:s,dateTime:c,instructions:d}),h.oR.success("Draft updated successfully!")}else{const e=await(0,n.gS)((0,n.rJ)(r.db,"workshops"),{collegeName:t,workshopName:s,dateTime:c,instructions:d,active:!1,linkId:null,createdAt:(0,n.O5)()});y(e.id),h.oR.success("Draft saved successfully!")}}catch(e){console.error(e),h.oR.error("Failed to save draft. Try again.")}finally{j(!1)}}},D=e=>{navigator.clipboard.writeText(e),S(e),setTimeout((()=>S("")),2e3)};return(0,x.jsxs)("div",{className:"container py-5",children:[(0,x.jsxs)("div",{className:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center bg-dark rounded-3 px-4 py-3 shadow mb-4 gap-3",children:[(0,x.jsx)("h1",{className:"h4 m-0 text-white fw-bold",children:"\ud83c\udfaf Create Workshop Feedback Form"}),(0,x.jsx)("button",{className:"btn btn-warning text-dark fw-semibold",onClick:()=>e("/dashboard"),children:"\u2190 Back to Dashboard"})]}),(0,x.jsxs)("div",{className:"bg-white rounded-4 shadow-sm p-4 border border-light-subtle",children:[N&&(0,x.jsx)(w.A,{}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"form-label fw-semibold text-dark",children:"College Name"}),(0,x.jsx)("input",{type:"text",className:"form-control bg-white text-dark",value:t,onChange:e=>a(e.target.value),required:!0})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"form-label fw-semibold text-dark",children:"Workshop Name"}),(0,x.jsx)("input",{type:"text",className:"form-control bg-white text-dark",value:s,onChange:e=>i(e.target.value),required:!0})]}),(0,x.jsxs)("div",{className:"mb-3",children:[(0,x.jsx)("label",{className:"form-label fw-semibold text-dark",children:"Date & Time"}),(0,x.jsx)("input",{type:"datetime-local",className:"form-control bg-white text-dark",value:c,onChange:e=>l(e.target.value),required:!0})]}),(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("label",{className:"form-label fw-semibold text-dark",children:"Instructions"}),(0,x.jsx)("textarea",{className:"form-control bg-white text-dark",rows:4,value:d,onChange:e=>m(e.target.value),placeholder:"Enter instructions for attendees"})]}),(0,x.jsxs)("div",{className:"d-flex flex-wrap gap-3 mb-4",children:[(0,x.jsx)("button",{className:"btn btn-warning text-dark fw-semibold",onClick:R,disabled:N||!F,children:"Save Draft"}),(0,x.jsx)("button",{className:"btn fw-semibold ".concat(u?"btn-danger":"btn-success"),onClick:async()=>{j(!0);try{k||await R();const e=(0,n.H9)(r.db,"workshops",k);let t=g;u||(t=f(),v(t)),await(0,n.mZ)(e,{active:!u,linkId:t,updatedAt:(0,n.O5)()}),b(!u),h.oR.success("Form ".concat(u?"deactivated":"activated","!"))}catch(e){console.error(e),h.oR.error("Failed to update status.")}finally{j(!1)}},disabled:N||!k,children:u?"Deactivate Form":"Activate Form"})]}),u&&g&&(0,x.jsxs)("div",{className:"mb-4",children:[(0,x.jsx)("p",{className:"mb-2 text-success fw-semibold",children:"\u2705 Admin Feedback Form (Private):"}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("input",{type:"text",className:"form-control bg-white text-dark",readOnly:!0,value:"".concat(window.location.origin,"/feedback/").concat(g)}),(0,x.jsx)("button",{className:"btn btn-outline-warning",onClick:()=>D("".concat(window.location.origin,"/feedback/").concat(g)),children:C==="".concat(window.location.origin,"/feedback/").concat(g)?"Copied":"Copy"})]})]}),k&&(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"mb-2 text-info fw-semibold",children:"\ud83c\udf93 Student Feedback Form (Public):"}),(0,x.jsxs)("div",{className:"input-group",children:[(0,x.jsx)("input",{type:"text",className:"form-control bg-white text-dark",readOnly:!0,value:"".concat(window.location.origin,"/form/").concat(k)}),(0,x.jsx)("button",{className:"btn btn-outline-warning",onClick:()=>D("".concat(window.location.origin,"/form/").concat(k)),children:C==="".concat(window.location.origin,"/form/").concat(k)?"Copied":"Copy"})]})]})]})]})}}}]);
//# sourceMappingURL=425.a61d5b1c.chunk.js.map