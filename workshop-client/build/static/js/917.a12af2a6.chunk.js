"use strict";(self.webpackChunkworkshop_client=self.webpackChunkworkshop_client||[]).push([[917],{406:(e,s,a)=>{e.exports=a.p+"static/media/login-bg.d975e901572dbf1d14f1.jpg"},917:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(43),r=a(216),l=a(472),n=a(981),i=a(406),c=a(579);const o=()=>{const{formId:e=""}=(0,r.g)(),[s,a]=(0,t.useState)(null),[o,d]=(0,t.useState)(!0),[m,h]=(0,t.useState)(!1),[x,u]=(0,t.useState)(!1),[b,f]=(0,t.useState)(""),[j,p]=(0,t.useState)(""),[g,N]=(0,t.useState)(""),[v,y]=(0,t.useState)(""),[w,k]=(0,t.useState)(""),[S,C]=(0,t.useState)(!1),[X,T]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{if(!e)return d(!1);try{const s=(0,l.H9)(n.db,"workshops",e),t=await(0,l.x7)(s);t.exists()&&a(t.data())}catch(s){console.error("Error fetching form:",s)}finally{d(!1)}})()}),[e]);return o?(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100",children:(0,c.jsx)("div",{className:"spinner-border text-warning",role:"status"})}):s?m?(0,c.jsx)("div",{className:"d-flex justify-content-center align-items-center vh-100 bg-light",children:(0,c.jsxs)("div",{className:"text-center p-5 rounded-4 shadow-sm bg-white border-0",style:{maxWidth:"600px"},children:[(0,c.jsx)("div",{className:"mb-4",children:(0,c.jsx)("div",{className:"d-inline-flex justify-content-center align-items-center bg-success text-white rounded-circle",style:{width:"60px",height:"60px",fontSize:"30px"},children:"\u2713"})}),(0,c.jsx)("h4",{className:"fw-bold text-dark mb-2",children:"Thank you! \ud83c\udf89"}),(0,c.jsx)("p",{className:"text-secondary mb-3",children:"Your feedback has been successfully submitted."}),(0,c.jsx)("p",{className:"text-dark fw-medium mb-4",children:"Your certificate will be generated and sent shortly to your verified:"}),(0,c.jsxs)("div",{className:"d-flex flex-column align-items-center mb-4",children:[(0,c.jsxs)("p",{className:"mb-2",children:[(0,c.jsx)("strong",{className:"text-dark",children:"\ud83d\udcf1 WhatsApp:"})," ",(0,c.jsx)("span",{className:"text-secondary",children:g})]}),(0,c.jsxs)("p",{className:"mb-0",children:[(0,c.jsx)("strong",{className:"text-dark",children:"\ud83d\udce7 Email:"})," ",(0,c.jsx)("span",{className:"text-secondary",children:v})]})]}),(0,c.jsx)("hr",{className:"my-4"}),(0,c.jsx)("p",{className:"text-muted small",children:"Please ensure your contact details are correct. For any issues, contact the coordinator."})]})}):(0,c.jsxs)("div",{className:"bg-light min-vh-100",children:[(0,c.jsx)("div",{className:"w-100 position-relative",style:{height:"220px",backgroundImage:"url(".concat(i,")"),backgroundSize:"cover",backgroundPosition:"center",borderBottom:"5px solid var(--bs-warning)"},children:(0,c.jsx)("div",{className:"position-absolute translate-middle text-white text-center px-3 top-40 start-50",children:(0,c.jsx)("h2",{className:"fw-bold",style:{textShadow:"1px 1px 4px #000"},children:"Please fill out the details to receive your certificate!"})})}),(0,c.jsx)("div",{className:"container",style:{marginTop:"-90px"},children:(0,c.jsx)("div",{className:"row justify-content-center",children:(0,c.jsx)("div",{className:"col-12 col-md-10 col-lg-8",children:(0,c.jsxs)("div",{className:"card shadow-sm border-0 p-4 rounded-4 bg-white",children:[(0,c.jsx)("h3",{className:"text-center fw-bold text-warning mb-3",children:s.workshopName}),(0,c.jsxs)("p",{className:"mb-1",children:[(0,c.jsx)("strong",{children:"College:"})," ",s.collegeName]}),(0,c.jsxs)("p",{className:"mb-3",children:[(0,c.jsx)("strong",{children:"Date & Time:"})," ",s.dateTime]}),s.instructions&&(0,c.jsx)("div",{className:"alert alert-info small",children:s.instructions}),S&&(0,c.jsxs)("div",{className:"alert alert-warning alert-dismissible fade show small",role:"alert",children:["\ud83d\udcf2 To receive your certificate via WhatsApp, please send ",(0,c.jsx)("strong",{children:'"join angle-particles"'})," from the number you entered to"," ",(0,c.jsx)("strong",{children:"+1 415 523 8886"}),".",(0,c.jsx)("button",{type:"button",className:"btn-close",onClick:()=>C(!1)})]}),(0,c.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),u(!0);try{const s=(0,l.H9)(n.db,"submissions","".concat(e,"_").concat(v));if((await(0,l.x7)(s)).exists())return void alert("You have already submitted feedback.");await(0,l.BN)(s,{formId:e,name:b,course:j,phone:g,email:v,feedback:w,timestamp:new Date});const a=await fetch("".concat("https://workshop-backend-cg3f.onrender.com","/generate-certificate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({formId:e,name:b,course:j,phone:g,email:v})});if(!a.ok){const e=await a.json();throw new Error(e.message||"Certificate generation failed")}h(!0)}catch(a){console.error("Submission error:",a),alert("Failed to submit feedback or generate certificate. Please try again.")}finally{u(!1)}},children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:"Name"}),(0,c.jsx)("input",{type:"text",className:"form-control",value:b,onChange:e=>f(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:"Course"}),(0,c.jsx)("input",{type:"text",className:"form-control",value:j,onChange:e=>p(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:"Phone (+91XXXXXXXXXX)"}),(0,c.jsx)("input",{type:"tel",className:"form-control",value:g,onChange:e=>{N(e.target.value),!X&&e.target.value.trim().length>=10&&(C(!0),T(!0))},required:!0})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("label",{className:"form-label",children:"Email"}),(0,c.jsx)("input",{type:"email",className:"form-control",value:v,onChange:e=>y(e.target.value),required:!0})]}),(0,c.jsxs)("div",{className:"mb-4",children:[(0,c.jsx)("label",{className:"form-label",children:"Feedback"}),(0,c.jsx)("textarea",{className:"form-control",rows:4,value:w,onChange:e=>k(e.target.value),required:!0})]}),(0,c.jsx)("div",{className:"d-grid",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-warning fw-bold",disabled:x,children:x?"Submitting...":"Submit Feedback"})})]})]})})})})]}):(0,c.jsx)("div",{className:"alert alert-danger text-center mt-5",children:"Invalid or inactive form link."})}}}]);
//# sourceMappingURL=917.a12af2a6.chunk.js.map